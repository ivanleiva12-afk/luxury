<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publicar Perfil - Sala Oscura</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíé</text></svg>" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="registro.css" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="config.js"></script>
  <script src="api.js"></script>
  <script src="url-handler.js"></script>
  <script defer src="registro.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="home">
        <img src="assets/logo-premium.png" alt="Sala Oscura" />
      </a>
      <nav class="site-nav">
        <ul class="nav-list">
          <li><a class="nav-link" href="home">Inicio</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="registro-main">
    <div class="registro-container">
      <!-- Progress Steps -->
      <div class="registro-progress">
        <div class="progress-step active" data-step="1">
          <div class="step-number">1</div>
          <span class="step-label">Informaci√≥n Personal</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="2">
          <div class="step-number">2</div>
          <span class="step-label">Caracter√≠sticas F√≠sicas</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="3">
          <div class="step-number">3</div>
          <span class="step-label">Servicios y Tarifas</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="4">
          <div class="step-number">4</div>
          <span class="step-label">Verificaci√≥n</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="5">
          <div class="step-number">5</div>
          <span class="step-label">Plan y Confirmaci√≥n</span>
        </div>
      </div>

      <form id="registro-form" class="registro-form">
        <!-- Step 1: Informaci√≥n Personal -->
        <div class="form-step active" data-step="1">
          <h2 class="form-step-title">Informaci√≥n Personal</h2>
          <p class="form-step-subtitle">Cu√©ntanos sobre ti para crear tu perfil</p>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="displayName">Nombre art√≠stico / Display Name *</label>
              <input type="text" id="displayName" name="displayName" required placeholder="Ej: Valentina Torres" />
            </div>
            
            <div class="form-group">
              <label for="username">Nombre de usuario</label>
              <div class="input-prefix">
                <span>@</span>
                <input type="text" id="username" name="username" placeholder="tu.usuario" />
              </div>
              <small style="color: var(--muted); margin-top: 4px; display: block;">Opcional - Si no lo agregas, se crear√° uno autom√°ticamente</small>
            </div>
            
            <div class="form-group">
              <label for="email">Correo electr√≥nico *</label>
              <input type="email" id="email" name="email" required placeholder="tu@email.com" />
            </div>
            
            <div class="form-group">
              <label for="whatsapp">WhatsApp *</label>
              <input type="tel" id="whatsapp" name="whatsapp" required placeholder="+56 9 1234 5678" />
            </div>
            
            <div class="form-group">
              <label for="password">Contrase√±a *</label>
              <input type="password" id="password" name="password" required placeholder="M√≠nimo 8 caracteres" />
            </div>
            
            <div class="form-group">
              <label for="confirmPassword">Confirmar contrase√±a *</label>
              <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Repite tu contrase√±a" />
            </div>
            
            <div class="form-group">
              <label for="city">Ciudad *</label>
              <select id="city" name="city" required>
                <option value="">Selecciona tu ciudad</option>
                <option value="Santiago">Santiago</option>
                <option value="Valpara√≠so">Valpara√≠so</option>
                <option value="Vi√±a del Mar">Vi√±a del Mar</option>
                <option value="Concepci√≥n">Concepci√≥n</option>
                <option value="Antofagasta">Antofagasta</option>
                <option value="La Serena">La Serena</option>
                <option value="Temuco">Temuco</option>
                <option value="Puerto Montt">Puerto Montt</option>
                <option value="Otra">Otra (especificar)</option>
              </select>
            </div>
            
            <div class="form-group" id="otherCityGroup" style="display: none;">
              <label for="otherCity">Especifica tu ciudad *</label>
              <input type="text" id="otherCity" name="otherCity" placeholder="Escribe el nombre de tu ciudad" />
            </div>
            
            <div class="form-group">
              <label for="commune">Comuna *</label>
              <input type="text" id="commune" name="commune" placeholder="Ej: Las Condes, Providencia" required />
            </div>
            
            <div class="form-group full-width">
              <label for="bio">Descripci√≥n / Bio *</label>
              <textarea id="bio" name="bio" required placeholder="Describe tu perfil, personalidad y lo que te hace especial..." rows="4"></textarea>
              <span class="char-counter"><span id="bioCount">0</span>/500</span>
            </div>
            
            <div class="form-group">
              <label for="nationality">Nacionalidad *</label>
              <select id="nationality" name="nationality" required>
                <option value="">Selecciona tu nacionalidad</option>
                <option value="Chilena">Chilena</option>
                <option value="Argentina">Argentina</option>
                <option value="Brasile√±a">Brasile√±a</option>
                <option value="Colombiana">Colombiana</option>
                <option value="Venezolana">Venezolana</option>
                <option value="Peruana">Peruana</option>
                <option value="Mexicana">Mexicana</option>
                <option value="Espa√±ola">Espa√±ola</option>
                <option value="Otra">Otra (especificar)</option>
              </select>
            </div>
            
            <div class="form-group" id="otherNationalityGroup" style="display: none;">
              <label for="otherNationality">Especifica tu nacionalidad *</label>
              <input type="text" id="otherNationality" name="otherNationality" placeholder="Escribe tu nacionalidad" />
            </div>
            
            <div class="form-group">
              <label>Idiomas que hablas *</label>
              <div class="checkbox-grid">
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Espa√±ol" checked />
                  <span>Espa√±ol</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Ingl√©s" />
                  <span>Ingl√©s</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Portugu√©s" />
                  <span>Portugu√©s</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Franc√©s" />
                  <span>Franc√©s</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Italiano" />
                  <span>Italiano</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" name="languages" value="Alem√°n" />
                  <span>Alem√°n</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: Caracter√≠sticas F√≠sicas -->
        <div class="form-step" data-step="2">
          <h2 class="form-step-title">Caracter√≠sticas F√≠sicas</h2>
          <p class="form-step-subtitle">Informaci√≥n sobre tu apariencia f√≠sica</p>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="birthdate">Fecha de nacimiento *</label>
              <input type="date" id="birthdate" name="birthdate" required />
              <small style="color: var(--muted); font-size: 11px; margin-top: 4px;">Debes ser mayor de 18 a√±os</small>
            </div>
            
            <div class="form-group">
              <label for="age">Edad</label>
              <input type="number" id="age" name="age" readonly disabled style="background: rgba(255,255,255,0.05); cursor: not-allowed;" placeholder="Se calcula autom√°ticamente" />
              <small style="color: var(--muted); font-size: 11px; margin-top: 4px;">Calculada a partir de tu fecha de nacimiento</small>
            </div>
            
            <div class="form-group">
              <label for="height">Altura (cm) *</label>
              <input type="number" id="height" name="height" required min="140" max="210" placeholder="Ej: 168" />
            </div>
            
            <div class="form-group">
              <label for="weight">Peso (kg) *</label>
              <input type="number" id="weight" name="weight" required min="40" max="150" placeholder="Ej: 58" />
            </div>
            
            <div class="form-group">
              <label for="skinTone">Tono de piel *</label>
              <select id="skinTone" name="skinTone" required>
                <option value="">Selecciona</option>
                <option value="Blanca">Blanca</option>
                <option value="Cauc√°sica">Cauc√°sica</option>
                <option value="Trigue√±a">Trigue√±a</option>
                <option value="Morena">Morena</option>
                <option value="Negra">Negra</option>
                <option value="Asi√°tica">Asi√°tica</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="bodyType">Tipo de cuerpo *</label>
              <select id="bodyType" name="bodyType" required>
                <option value="">Selecciona</option>
                <option value="Delgada">Delgada</option>
                <option value="Atl√©tica">Atl√©tica</option>
                <option value="Normal">Normal</option>
                <option value="Curvil√≠nea">Curvil√≠nea</option>
                <option value="Voluptuosa">Voluptuosa</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="hairColor">Color de cabello *</label>
              <select id="hairColor" name="hairColor" required>
                <option value="">Selecciona</option>
                <option value="Negro">Negro</option>
                <option value="Casta√±o">Casta√±o</option>
                <option value="Rubio">Rubio</option>
                <option value="Pelirrojo">Pelirrojo</option>
                <option value="Platinado">Platinado</option>
                <option value="Colorido">Colorido</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="hairLength">Largo del cabello *</label>
              <select id="hairLength" name="hairLength" required>
                <option value="">Selecciona</option>
                <option value="Corto">Corto</option>
                <option value="Medio">Medio</option>
                <option value="Largo">Largo</option>
                <option value="Muy largo">Muy largo</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="eyeColor">Color de ojos *</label>
              <select id="eyeColor" name="eyeColor" required>
                <option value="">Selecciona</option>
                <option value="Caf√©">Caf√©</option>
                <option value="Negro">Negro</option>
                <option value="Verde">Verde</option>
                <option value="Azul">Azul</option>
                <option value="Miel">Miel</option>
                <option value="Gris">Gris</option>
              </select>
            </div>
            
            <div class="form-section-title">Medidas</div>
            
            <div class="form-group">
              <label for="bust">Busto (cm)</label>
              <input type="number" id="bust" name="bust" min="70" max="130" placeholder="Ej: 95" />
            </div>
            
            <div class="form-group">
              <label for="waist">Cintura (cm)</label>
              <input type="number" id="waist" name="waist" min="50" max="100" placeholder="Ej: 62" />
            </div>
            
            <div class="form-group">
              <label for="hips">Caderas (cm)</label>
              <input type="number" id="hips" name="hips" min="70" max="140" placeholder="Ej: 98" />
            </div>
            
            <div class="form-group">
              <label for="breastSize">Tama√±o de busto *</label>
              <select id="breastSize" name="breastSize" required>
                <option value="">Selecciona</option>
                <option value="Peque√±o">Peque√±o</option>
                <option value="Mediano">Mediano</option>
                <option value="Grande">Grande</option>
                <option value="Muy grande">Muy grande</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="breastType">Tipo de busto *</label>
              <select id="breastType" name="breastType" required>
                <option value="">Selecciona</option>
                <option value="Natural">Natural</option>
                <option value="Operados">Operados</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="buttSize">Tama√±o de cola *</label>
              <select id="buttSize" name="buttSize" required>
                <option value="">Selecciona</option>
                <option value="Peque√±a">Peque√±a</option>
                <option value="Mediana">Mediana</option>
                <option value="Grande">Grande</option>
                <option value="Muy grande">Muy grande</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="pubicHair">Depilaci√≥n √≠ntima *</label>
              <select id="pubicHair" name="pubicHair" required>
                <option value="">Selecciona</option>
                <option value="Depilada completa">Depilada completa</option>
                <option value="Depilada parcial">Depilada parcial</option>
                <option value="Natural recortado">Natural recortado</option>
                <option value="Natural">Natural</option>
              </select>
            </div>
            
            <div class="form-section-title">Otros atributos</div>
            
            <div class="form-group">
              <label>¬øTienes tatuajes?</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="tattoos" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="tattoos" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-group">
              <label>¬øTienes piercings?</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="piercings" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="piercings" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-group">
              <label>¬øFumas?</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="smoker" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="smoker" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 3: Servicios y Tarifas -->
        <div class="form-step" data-step="3">
          <h2 class="form-step-title">Servicios y Tarifas</h2>
          <p class="form-step-subtitle">Define qu√© servicios ofreces y tus tarifas</p>
          
          <div class="form-grid">
            <div class="form-section-title full-width">Servicios que ofreces</div>
            
            <div class="form-group full-width">
              <div class="services-grid">
                <label class="service-item">
                  <input type="checkbox" name="services" value="oral" />
                  <span>Oral con preservativo</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="americana" />
                  <span>Americana</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="penetracion" />
                  <span>Penetraci√≥n</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="masajes" />
                  <span>Masajes</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="juguetes" />
                  <span>Juguetes</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="fantasias" />
                  <span>Fantas√≠as</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="parejas" />
                  <span>Parejas</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="despedidas" />
                  <span>Despedidas</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="viajes" />
                  <span>Viajes</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="eyaculacion-facial" />
                  <span>Eyaculaci√≥n facial</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="eyaculacion-cuerpo" />
                  <span>Eyaculaci√≥n en cuerpo</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="striptease" />
                  <span>Striptease</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="baile" />
                  <span>Baile</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="roll-play" />
                  <span>Roll Play</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="girlfriend" />
                  <span>Girlfriend Experience</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="pornstar" />
                  <span>Pornstar Experience</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="beso-negro" />
                  <span>Beso negro</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="lluvia-dorada" />
                  <span>Lluvia dorada</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="dominacion" />
                  <span>Dominaci√≥n</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="sumision" />
                  <span>Sumisi√≥n</span>
                </label>
                <label class="service-item">
                  <input type="checkbox" name="services" value="otros" />
                  <span>Otros servicios üòè</span>
                </label>
              </div>
            </div>
            
            <div class="form-section-title full-width">Disponibilidad de atenci√≥n</div>
            
            <div class="form-group">
              <label>¬øAtiendes en tu lugar? (Incall)</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="incall" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="incall" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-group">
              <label>¬øVas al lugar del cliente? (Outcall)</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="outcall" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="outcall" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-group">
              <label>¬øDisponible para viajes?</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input type="radio" name="travel" value="true" />
                  <span>S√≠</span>
                </label>
                <label class="radio-item">
                  <input type="radio" name="travel" value="false" checked />
                  <span>No</span>
                </label>
              </div>
            </div>
            
            <div class="form-group">
              <label for="availability">Horario de disponibilidad *</label>
              <select id="availability" name="availability" required>
                <option value="">Selecciona</option>
                <option value="24/7">24/7</option>
                <option value="Ma√±ana">Solo ma√±anas</option>
                <option value="Tarde">Solo tardes</option>
                <option value="Noche">Solo noches</option>
                <option value="D√≠a">Solo de d√≠a</option>
                <option value="Fin de semana">Solo fines de semana</option>
              </select>
            </div>
            
            <div class="form-section-title full-width">Tarifas (en pesos chilenos CLP)</div>
            
            <div class="form-group">
              <label for="priceHour">Tarifa por hora (CLP) *</label>
              <div class="input-prefix">
                <span>$</span>
                <input type="number" id="priceHour" name="priceHour" required min="100000" placeholder="Ej: 150000" />
              </div>
              <div id="priceWarning" style="display: none; margin-top: 8px; padding: 12px; background: rgba(220,38,38,0.15); border: 1px solid rgba(220,38,38,0.3); border-radius: 8px;">
                <p style="color: #DC2626; margin: 0; font-size: 13px; font-weight: 500;">
                  ‚ö†Ô∏è <strong>Tarifa m√≠nima no cumplida:</strong> Sala Negra es una plataforma exclusiva para profesionales con tarifas superiores a $100.000 CLP por hora.
                </p>
              </div>
            </div>
            
            <div class="form-group">
              <label for="priceTwoHours">Tarifa 2 horas (CLP)</label>
              <div class="input-prefix">
                <span>$</span>
                <input type="number" id="priceTwoHours" name="priceTwoHours" min="80000" placeholder="Ej: 280000" />
              </div>
            </div>
            
            <div class="form-group">
              <label for="priceOvernight">Tarifa noche completa (CLP)</label>
              <div class="input-prefix">
                <span>$</span>
                <input type="number" id="priceOvernight" name="priceOvernight" min="200000" placeholder="Ej: 800000" />
              </div>
            </div>
          </div>
        </div>

        <!-- Step 4: Verificaci√≥n -->
        <div class="form-step" data-step="4">
          <h2 class="form-step-title">Verificaci√≥n de Identidad</h2>
          <p class="form-step-subtitle">Para tu seguridad y la de nuestros usuarios, necesitamos verificar tu identidad</p>
          
          <div class="verification-notice">
            <div class="notice-icon">üîí</div>
            <div class="notice-content">
              <h4>Tus documentos est√°n protegidos</h4>
              <p>Toda la informaci√≥n se encripta y solo se usa para verificaci√≥n. No compartimos tus datos con terceros.</p>
            </div>
          </div>
          
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Documento de identidad oficial (Carnet / Pasaporte) *</label>
              <div class="upload-zone" id="docUploadZone">
                <input type="file" id="docUpload" name="docUpload" accept="image/*,.pdf" required hidden />
                <div class="upload-content">
                  <span class="upload-icon">üìÑ</span>
                  <span class="upload-text">Arrastra tu documento aqu√≠ o <strong>haz clic para subir</strong></span>
                  <span class="upload-hint">Formatos: JPG, PNG, PDF. M√°ximo 10MB</span>
                </div>
                <div class="upload-preview" id="docPreview"></div>
              </div>
            </div>
            
            <div class="form-group full-width">
              <label>Foto sosteniendo tu carnet (Selfie con documento) *</label>
              <div class="upload-zone" id="selfieUploadZone">
                <input type="file" id="selfieUpload" name="selfieUpload" accept="image/*" required hidden />
                <div class="upload-content">
                  <span class="upload-icon">ü§≥</span>
                  <span class="upload-text">Sube una foto tuya sosteniendo tu carnet</span>
                  <span class="upload-hint">Tu rostro y el documento deben ser claramente visibles</span>
                </div>
                <div class="upload-preview" id="selfiePreview"></div>
              </div>
            </div>
            
            <div class="form-group full-width">
              <label>Fotos de verificaci√≥n para tu perfil (2 fotos obligatorias) *</label>
              <div class="verification-photo-notice" style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                <h4 style="color: #8B5CF6; margin: 0 0 12px 0; font-size: 15px;">üì∏ Importante sobre las fotos de verificaci√≥n:</h4>
                <ul style="color: var(--muted); margin: 0; padding-left: 20px; font-size: 13px; line-height: 1.8;">
                  <li><strong style="color: var(--text);">Sin editar:</strong> Las fotos deben ser originales, sin filtros ni retoques</li>
                  <li><strong style="color: var(--text);">Rostro visible:</strong> Tu cara debe aparecer claramente en ambas fotos</li>
                  <li><strong style="color: #DC2626;">‚ö†Ô∏è Permanentes:</strong> Estas 2 fotos quedar√°n en tu perfil y <strong>no podr√°n ser eliminadas</strong>, solo podr√°s difuminar tu rostro desde tu panel</li>
                  <li><strong style="color: var(--gold);">‚ú® M√°s contenido:</strong> Podr√°s subir m√°s fotos y videos desde tu perfil seg√∫n el plan que elijas</li>
                </ul>
              </div>
              <div class="upload-zone multiple" id="photosUploadZone">
                <input type="file" id="photosUpload" name="photosUpload" accept="image/*" multiple required hidden />
                <div class="upload-content">
                  <span class="upload-icon">üì∏</span>
                  <span class="upload-text">Sube tus 2 fotos de verificaci√≥n obligatorias</span>
                  <span class="upload-hint">Exactamente 2 fotos. Formatos: JPG, PNG. M√°ximo 5MB cada una</span>
                </div>
                <div class="upload-preview-grid" id="photosPreview"></div>
              </div>
              <div id="photosCounter" style="margin-top: 8px; font-size: 13px; color: var(--muted);">
                <span id="photosCount">0</span>/2 fotos seleccionadas
              </div>
              <input type="hidden" id="mainPhotoIndex" name="mainPhotoIndex" value="0" />
              <div id="mainPhotoInfo" style="display: none; margin-top: 12px; padding: 12px; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px;">
                <p style="color: #10B981; margin: 0; font-size: 14px;">‚≠ê <strong>Haz clic en una foto para seleccionarla como foto principal</strong> (la que aparecer√° en el carrusel)</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 5: Plan y Confirmaci√≥n -->
        <div class="form-step" data-step="5">
          <h2 class="form-step-title">Selecciona tu Plan</h2>
          <p class="form-step-subtitle">Elige el nivel de visibilidad para tu perfil</p>
          
          <!-- Mensaje de restricci√≥n de planes -->
          <div id="planRestrictionMessage" style="display: none; margin-bottom: 24px; padding: 16px 20px; border-radius: 12px; background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3);">
            <p style="color: #A78BFA; margin: 0; font-size: 14px;">
              <strong>üíé Planes disponibles seg√∫n tu tarifa:</strong>
              <span id="planRestrictionText"></span>
            </p>
          </div>
          
          <div class="plans-container">
            <div class="plan-card" data-plan="vip">
              <div class="plan-badge">VIP</div>
              <h3 class="plan-name">VIP Black</h3>
              
              <!-- Selector de duraci√≥n -->
              <div class="plan-duration-selector" style="margin-bottom: 16px;">
                <label style="color: var(--muted); font-size: 12px; display: block; margin-bottom: 8px;">Duraci√≥n del plan:</label>
                <div class="duration-options" style="display: flex; gap: 6px;">
                  <button type="button" class="duration-btn" data-days="7" data-plan="vip">7 d√≠as</button>
                  <button type="button" class="duration-btn" data-days="15" data-plan="vip">15 d√≠as</button>
                  <button type="button" class="duration-btn active" data-days="30" data-plan="vip">30 d√≠as</button>
                </div>
              </div>
              
              <div class="plan-price">
                <span class="price-amount" data-plan="vip">$49.990</span>
                <span class="price-period" data-plan="vip">/30 d√≠as</span>
              </div>
              <ul class="plan-features" data-plan="vip">
                <li>‚úì Perfil verificado</li>
                <li>‚úì Apareces en secci√≥n VIP</li>
                <li>‚úì Badge VIP exclusivo</li>
                <li>‚úì Hasta 10 fotos</li>
                <li>‚úì 2 videos</li>
                <li>‚úì Estad√≠sticas b√°sicas</li>
              </ul>
              <button type="button" class="plan-select-btn" data-plan="vip">Seleccionar VIP</button>
            </div>
            
            <div class="plan-card featured" data-plan="premium">
              <div class="plan-badge premium">PREMIUM</div>
              <div class="plan-popular">M√°s popular</div>
              <h3 class="plan-name">Premium Select</h3>
              
              <!-- Selector de duraci√≥n -->
              <div class="plan-duration-selector" style="margin-bottom: 16px;">
                <label style="color: var(--muted); font-size: 12px; display: block; margin-bottom: 8px;">Duraci√≥n del plan:</label>
                <div class="duration-options" style="display: flex; gap: 6px;">
                  <button type="button" class="duration-btn" data-days="7" data-plan="premium">7 d√≠as</button>
                  <button type="button" class="duration-btn" data-days="15" data-plan="premium">15 d√≠as</button>
                  <button type="button" class="duration-btn active" data-days="30" data-plan="premium">30 d√≠as</button>
                </div>
              </div>
              
              <div class="plan-price">
                <span class="price-amount" data-plan="premium">$79.990</span>
                <span class="price-period" data-plan="premium">/30 d√≠as</span>
              </div>
              <ul class="plan-features" data-plan="premium">
                <li>‚úì Todo lo de VIP</li>
                <li>‚úì Apareces en Premium Select</li>
                <li>‚úì Badge Premium dorado</li>
                <li>‚úì Hasta 15 fotos</li>
                <li>‚úì 4 videos</li>
                <li>‚úì Estad√≠sticas avanzadas</li>
                <li>‚úì Prioridad en b√∫squedas</li>
                <li>‚úì Soporte prioritario</li>
              </ul>
              <button type="button" class="plan-select-btn premium" data-plan="premium">Seleccionar Premium</button>
            </div>
            
            <div class="plan-card luxury" data-plan="luxury">
              <div class="plan-badge luxury">LUXURY</div>
              <div class="plan-limited">‚ö° Disponibilidad limitada</div>
              <h3 class="plan-name">Luxury & Exclusive</h3>
              
              <!-- Selector de duraci√≥n -->
              <div class="plan-duration-selector" style="margin-bottom: 16px;">
                <label style="color: var(--muted); font-size: 12px; display: block; margin-bottom: 8px;">Duraci√≥n del plan:</label>
                <div class="duration-options" style="display: flex; gap: 6px;">
                  <button type="button" class="duration-btn" data-days="7" data-plan="luxury">7 d√≠as</button>
                  <button type="button" class="duration-btn" data-days="15" data-plan="luxury">15 d√≠as</button>
                  <button type="button" class="duration-btn active" data-days="30" data-plan="luxury">30 d√≠as</button>
                </div>
              </div>
              
              <div class="plan-price">
                <span class="price-amount" data-plan="luxury">$149.990</span>
                <span class="price-period" data-plan="luxury">/30 d√≠as</span>
              </div>
              <ul class="plan-features" data-plan="luxury">
                <li>‚úì Todo lo de Premium</li>
                <li>‚úì Carrusel principal destacado</li>
                <li>‚úì Badge Luxury diamante</li>
                <li>‚úì Fotos ilimitadas</li>
                <li>‚úì Videos ilimitados</li>
                <li>‚úì Estad√≠sticas completas</li>
                <li>‚úì M√°xima visibilidad</li>
                <li>‚úì Gestor de cuenta personal</li>
                <li>‚úì Verificaci√≥n prioritaria</li>
              </ul>
              <button type="button" class="plan-select-btn luxury" data-plan="luxury">Seleccionar Luxury</button>
            </div>
          </div>
          
          <input type="hidden" id="selectedPlan" name="selectedPlan" value="" />
          <input type="hidden" id="selectedDuration" name="selectedDuration" value="30" />
          
          <!-- Secci√≥n de Pago y Entrevista (se muestra al seleccionar plan) -->
          <div id="paymentSection" style="display: none; margin-top: 32px;">
            
            <!-- C√≥digo de descuento -->
            <div class="discount-code-section" style="padding: 24px; background: rgba(255,255,255,0.03); border: 1px solid rgba(212,175,55,0.2); border-radius: 12px; margin-bottom: 24px;">
              <h3 style="color: var(--gold); margin-bottom: 16px; font-size: 18px;">üéüÔ∏è ¬øTienes un c√≥digo de descuento?</h3>
              <div style="display: flex; gap: 12px; align-items: flex-start;">
                <div class="form-group" style="flex: 1; margin-bottom: 0;">
                  <input type="text" id="discountCode" name="discountCode" placeholder="Ingresa tu c√≥digo" style="text-transform: uppercase;" />
                </div>
                <button type="button" id="applyDiscountBtn" class="btn" style="background: rgba(212,175,55,0.2); color: var(--gold); border: 1px solid var(--gold); padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 200ms ease; white-space: nowrap;">Aplicar c√≥digo</button>
              </div>
              <div id="discountMessage" style="margin-top: 12px; display: none;"></div>
              <input type="hidden" id="appliedDiscount" name="appliedDiscount" value="" />
              <input type="hidden" id="finalPrice" name="finalPrice" value="" />
            </div>
            
            <!-- Datos de Transferencia -->
            <div class="transfer-section" style="padding: 24px; background: linear-gradient(135deg, rgba(212,175,55,0.1), rgba(139,92,246,0.05)); border: 1px solid rgba(212,175,55,0.3); border-radius: 12px; margin-bottom: 24px;">
              <h3 style="color: var(--gold); margin-bottom: 20px; font-size: 18px;">üí≥ Datos para Transferencia</h3>
              
              <div id="transferDataDisplay" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px;">
                <div>
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">Banco</span>
                  <p id="bankName" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">Banco Estado</p>
                </div>
                <div>
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">Tipo de Cuenta</span>
                  <p id="accountType" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">Cuenta Corriente</p>
                </div>
                <div>
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">N√∫mero de Cuenta</span>
                  <p id="accountNumber" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">1234567890</p>
                </div>
                <div>
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">RUT</span>
                  <p id="accountRut" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">12.345.678-9</p>
                </div>
                <div style="grid-column: span 2;">
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">Nombre del Titular</span>
                  <p id="accountHolder" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">Luxury Services SpA</p>
                </div>
                <div style="grid-column: span 2;">
                  <span style="color: var(--muted); font-size: 12px; text-transform: uppercase;">Correo para Comprobante</span>
                  <p id="accountEmail" style="color: var(--text); font-weight: 600; margin: 4px 0 0 0;">pagos@luxury.cl</p>
                </div>
              </div>
              
              <div style="margin-top: 20px; padding: 16px; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px;">
                <p style="color: #10B981; margin: 0; font-size: 14px;">
                  <strong>üí∞ Monto a transferir:</strong> <span id="amountToTransfer" style="font-size: 18px;">$0</span>
                </p>
                <p style="color: rgba(16,185,129,0.8); margin: 8px 0 0 0; font-size: 13px;">
                  ‚ö†Ô∏è Si tu perfil es rechazado despu√©s de la entrevista, se te devolver√° el 100% del pago.
                </p>
              </div>
              
              <!-- Adjuntar comprobante -->
              <div class="form-group" style="margin-top: 20px;">
                <label style="color: var(--text); font-weight: 600; margin-bottom: 8px; display: block;">üìé Adjuntar Comprobante de Transferencia</label>
                <div id="transferUploadZone" class="upload-zone" style="border: 2px dashed rgba(212,175,55,0.3); border-radius: 12px; padding: 24px; text-align: center; cursor: pointer; transition: all 200ms ease;">
                  <input type="file" id="transferReceipt" name="transferReceipt" accept="image/*,.pdf" style="display: none;" />
                  <div class="upload-placeholder">
                    <span style="font-size: 32px; display: block; margin-bottom: 8px;">üìÑ</span>
                    <p style="color: var(--muted); margin: 0;">Arrastra tu comprobante aqu√≠ o haz clic para seleccionar</p>
                    <small style="color: var(--muted);">PNG, JPG o PDF (m√°x. 5MB)</small>
                  </div>
                  <div class="upload-preview" style="display: none;">
                    <span style="color: #10B981; font-weight: 600;">‚úì Comprobante adjunto</span>
                    <p id="transferFileName" style="color: var(--muted); margin: 4px 0 0 0;"></p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Opci√≥n pagar despu√©s de entrevista -->
            <div id="payLaterOption" style="padding: 20px; background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 12px; margin-bottom: 24px;">
              <label style="display: flex; align-items: flex-start; gap: 12px; cursor: pointer;">
                <input type="checkbox" id="payAfterInterview" name="payAfterInterview" style="accent-color: var(--gold); margin-top: 4px; width: 20px; height: 20px;" />
                <div>
                  <span style="color: #F59E0B; font-weight: 600; font-size: 16px;">üí° Prefiero pagar despu√©s de la entrevista</span>
                  <p style="color: rgba(245,158,11,0.8); margin: 8px 0 0 0; font-size: 14px;">
                    Si marcas esta opci√≥n, podr√°s realizar el pago una vez que tu entrevista sea aprobada. 
                    Tu perfil no ser√° publicado hasta confirmar el pago.
                  </p>
                </div>
              </label>
            </div>
            
            <!-- Agendar Entrevista -->
            <div class="interview-section" style="padding: 24px; background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; margin-bottom: 24px;">
              <h3 style="color: #8B5CF6; margin-bottom: 20px; font-size: 18px;">üìÖ Agendar Entrevista de Verificaci√≥n</h3>
              <p style="color: var(--muted); margin-bottom: 20px; font-size: 14px;">
                Todos los perfiles pasan por una breve entrevista de verificaci√≥n por videollamada (5-10 min). 
                Selecciona el d√≠a y hora que mejor te acomode.
              </p>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group" style="margin-bottom: 0;">
                  <label for="interviewDate">Fecha de Entrevista *</label>
                  <input type="date" id="interviewDate" name="interviewDate" required min="" />
                </div>
                
                <div class="form-group" style="margin-bottom: 0;">
                  <label for="interviewTime">Hora de Entrevista *</label>
                  <select id="interviewTime" name="interviewTime" required>
                    <option value="">Selecciona una hora</option>
                    <!-- Las opciones se cargan din√°micamente desde la configuraci√≥n del admin -->
                  </select>
                </div>
              </div>
              
              <div style="margin-top: 16px; padding: 12px; background: rgba(139,92,246,0.15); border-radius: 8px;">
                <p style="color: #A78BFA; margin: 0; font-size: 13px;">
                  üìû Recibir√°s un enlace de videollamada por WhatsApp 30 minutos antes de tu cita.
                </p>
              </div>
            </div>
            
          </div>
          
          <div class="legal-section">
            <h3>Declaraci√≥n y T√©rminos Legales</h3>
            
            <div class="legal-checkbox">
              <label class="checkbox-legal">
                <input type="checkbox" id="ageConfirm" name="ageConfirm" required />
                <span class="checkmark"></span>
                <span class="legal-text">
                  <strong>Declaro bajo juramento que soy mayor de 18 a√±os</strong> y que toda la informaci√≥n proporcionada en este formulario es ver√≠dica y corresponde a mi identidad real.
                </span>
              </label>
            </div>
            
            <div class="legal-checkbox">
              <label class="checkbox-legal">
                <input type="checkbox" id="termsAccept" name="termsAccept" required />
                <span class="checkmark"></span>
                <span class="legal-text">
                  He le√≠do y acepto los <a href="#" target="_blank">T√©rminos y Condiciones</a> y la <a href="#" target="_blank">Pol√≠tica de Privacidad</a> de Sala Oscura.
                </span>
              </label>
            </div>
            
            <div class="legal-checkbox">
              <label class="checkbox-legal">
                <input type="checkbox" id="fraudDisclaimer" name="fraudDisclaimer" required />
                <span class="checkmark"></span>
                <span class="legal-text">
                  Entiendo que <strong>cualquier enga√±o, falsedad o suplantaci√≥n de identidad</strong> resultar√° en la eliminaci√≥n inmediata de mi cuenta y que <strong>salaoscura.com queda exenta de cualquier responsabilidad</strong>. Adem√°s, se notificar√° a las autoridades competentes en caso de falsificaci√≥n de identidad o edad, pudiendo derivar en acciones legales.
                </span>
              </label>
            </div>
            
            <div class="legal-checkbox">
              <label class="checkbox-legal">
                <input type="checkbox" id="contentOwnership" name="contentOwnership" required />
                <span class="checkmark"></span>
                <span class="legal-text">
                  Certifico que <strong>soy el/la propietario/a de todo el contenido</strong> (fotos y videos) que estoy subiendo, y autorizo su publicaci√≥n en la plataforma.
                </span>
              </label>
            </div>
          </div>
          
          <div class="warning-box">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <div class="warning-content">
              <h4>Advertencia Legal</h4>
              <p>La falsificaci√≥n de documentos de identidad o la declaraci√≥n de informaci√≥n falsa sobre la edad constituye un delito penal. Sala Oscura colabora activamente con las autoridades y proporcionar√° toda la informaci√≥n necesaria en caso de investigaciones.</p>
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="form-navigation">
          <button type="button" id="prevBtn" class="nav-btn prev-btn" style="display: none;">
            ‚Üê Anterior
          </button>
          <button type="button" id="nextBtn" class="nav-btn next-btn">
            Siguiente ‚Üí
          </button>
          <button type="submit" id="submitBtn" class="nav-btn submit-btn" style="display: none;">
            Crear mi cuenta
          </button>
        </div>
      </form>
    </div>
  </main>

  <footer class="site-footer registro-footer">
    <div class="container">
      <p class="footer-copy">¬© <span id="year"></span> Sala Oscura. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script src="config.js"></script>
  <script src="api.js"></script>
  <script src="registro.js"></script>
</body>
</html>
